---
layout: post
title:  "RBTree红黑树"
categories: Algorithm
tags: Algorithm 数据结构
author: Chester Cheung
---

* content
{:toc}


这次我们来几种攻克下面试中常常被问到的难点问题——RB Tree

红黑树是一个平衡的二叉树，但不是一个完美的平衡二叉树。出现的原因是，在二叉搜索树中，往往有一些插入操作会导致二叉树左右不平衡，导致二叉树时间复杂度退化为O(n)，使得退化为链表。为了解决这种问题，红黑树（Red Black Tree）应运而生。

### 红黑树必须满足的5歌性质：

> 当我们进行插入或者删除操作时，所作的一切操作都是为了调整树使之符合这五条性质。

1. 节点是红色或者是黑色

2. 根节点是黑色

3. 每个叶节点（NIL或空节点）是黑色

4. 每个红色节点的两个子节点都是黑色的（也就是说不存在两个连续的红色节点）

5. 从任一节点到其没个叶节点的所有路径都包含相同数目的黑色节点

### 3个基本操作：

> 变色，左旋，右旋

一、变色：
为了符合红黑树的基本规则，需要把红色变黑色，或者黑色变红色。一般来说变色并不是目的，而是配合左旋右旋的手段，比如，在插入时我们往往需要将节点进行变色，然后进行左右旋操作，这样才能保持并实现红黑树的相关规则。

![RBTree1](https://zhyChesterCheung.github.io/photos/RBTree1.jpg)

> 旋转的目的是将节点多的一支出让节点给另一个节点少的一支，旋转操作在插入和删除操作中经常会用到，所以要熟记。

![RBTree2](https://zhyChesterCheung.github.io/photos/RBTree2.jpg)

二、左旋：逆时针旋转两个节点，使父节点被自己的右子节点取代，而自己成为自己的左子节点。

![RBTree3](https://zhyChesterCheung.github.io/photos/RBTree3.jpg)

三、右旋：顺时针旋转两个节点，使父节点被自己的左子节点取代，而自己成为自己的右子节点。

![RBTree4](https://zhyChesterCheung.github.io/photos/RBTree4.jpg)

> 变色和旋转规则

1. 变颜色的情况：当前节点的父亲是红色，且他的叔叔节点也是红色的：

（1）把父节点设为黑色

（2）把叔叔节点也设为黑色

（3）把祖父节点设为红色

（4）把指针定义到祖父节点设为当前要操作的

2. 左旋：当前父节点是红色，叔叔节点是黑色，且当前的节点是右子树。左旋以父节点为中心进行左旋。

3. 右旋：当前父节点是红色，叔叔是黑色的时候，且当前的节点是左子树。右旋：

（1）把父节点变为黑色

（2）把祖父节点变为红色

（3）以祖父节点为中心进行旋转


