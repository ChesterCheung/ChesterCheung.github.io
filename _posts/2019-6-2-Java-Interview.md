---
layout: post
title:  "Java Basic Knowledge Point"
categories: Java
tags: Java OS
author: Chester Cheung
---

* content
{:toc}


### 1. 什么是Java虚拟机，为什么Java被称为是“平台无关型编程语言”

Java虚拟机是一个可以执行.class字节码文件的虚拟机进程，Java源文件被编译成能被Java虚拟机执行的.class 字节码文件。Java被设计成允许应用程序可以在任意平台运行，而不需要程序员为每一个平台专门重写或者是单独编译。Java的跨平台不是Java源程序的跨平台，Java源代码先被javac编译成二进制的.class字节码文件(其实Java的跨平台指的是.class文件的跨平台)，.class文件再运行在jvm上，jvm中的Java解释器会将其解释成对应平台的机器码文件进行执行。








### 2. Java中JDK和JRE的区别

JRE是Java runtime environment，是Java运行时环境，包括Java 虚拟机/Java基础类库/支持文件，他不包含有开发工具JDK/编译器/调试器等工具

JDK是Java Ddevelopment kit，是完整的Java软件开发包，其中包含了JRE，编译器和其他工具，可以让开发者开发/编译/执行Java应用程序

### 3. Static 关键字是什么意思？Java中是否可以覆盖一个private或者static方法？是否可以在static环境中访问非static变量？

static关键字是表示静态的含义，被static修饰的变量或方法称为类变量和类方法，他们可以在所属类没有被实例化的情况下被访问，本质上是随着类的加载而被加载的。

Java中的static修饰的方法是被静态绑定的，而方法的覆盖是为了实现多态，是基于运动时动态绑定的，所以static修饰的方法是不能被覆盖的。

Java也不能覆盖private的方法，因为被private修饰的变量和方法只能在当前类中使用，并且在当前类的子类中也是不可见的，所以不能被覆盖。

static变量在Java中是属于类的，他在所有的实例中都是一样的；当类被Java虚拟机载入的时候，会对static变量进行初始化。此时，如果你尝试不用实例来访问非static的变量，编译器就会报错，因为这些变量的实例还没有被创建出来，实际上还没有任何关联。

### 4.什么是Java自动装箱？

自动装箱是Java编译器在基本数据类型和对应的对象包装类型之间做的一个转化，比如：将int转化成integer，double转化成Double等等，反之，就是自动拆箱。Java支持的s数据类型有两种：一种是基本数据类型，包括byte，char，int，float，double，short，boolean，long；另一种是引用类型，比如String，其实是对象的引用。

JVM中虚拟栈中，引用类型声明的变量在内存中实际存储的是对象的地址，创建的对象实质在堆中，通过地址来找到堆中的对象的过程，就是引用类型。

### 5.Java中的方法重写Overriding和方法重载Overloading是什么意思？

方法重载发生在同一个类里面两个或是多个方法名相同但是参数不同的情况；与此相对，方法重写说的是子类重新定义了父类的方法。方法重写必须有相同的方法名/参数列表/返回类型。

### 6. Java支持多继承吗？

Java不支持多继承，只支持单继承，但是Java的接口支持多继承，即一个子类可以实现多个父类的接口，接口是用来拓展对象的功能的，子类继承了多个父类接口，说明子类拓展了多个父类的功能。

### 7. 接口和抽象类的区别是什么？

Java提供和支持创建抽象类和接口，本质上**抽象是对类的抽象，是一种模版设计；接口是对行为的抽象，是一种行为规范**，不同点在于：

1. 接口中所有的方法隐含都是抽象的，而抽象类中则可以同时包含抽象和非抽象方法。

2. 类可以继承多个接口，但是只能实现一个抽象类

3. 抽象类中的成员变量可以是任何类型的，但是接口中的成员变量只能是public static final类型的

### 8.值传递和引用传递

值传递是对于基本类型变量而言的，传递的是该变量的一个副本，改变副本不影响原变量；引用传递一般是对于对象型变量而言的，传递的是该对象地址的一个副本，并不是原对象本身。

通常认为，Java中基础类型的数据传递都是值传递，实例对象的传递都是引用传递。

### 9.线程和进程的区别是什么？

进程是执行着的应用程序，而线程是进程内部的一个执行序列；进程是资源分配的单元，线程是cpu调度和执行的单元；进程间切换代价大，线程间切换代价小；进程拥有的资源多，线程拥有的资源少；一个进程可以有多个线程，线程又叫轻量级的进程，多个线程共享进程的资源。

### 10. 创建线程有几种不同的方式，喜欢哪一种？

4中方法创建线程：1.继承Thread类(真正意义上的线程类)，2.实现Runnable接口并重写里面的run方法，3.应用程序可以使用Executor框架来创建线程池，4. 实现Callable接口，重写call方法，有返回值

其中，实现Runnable这种方法最受欢迎，因为不需要继承Thread类，因为Java是单继承的。

### 11. 概括下线程的几种可用状态

![线程](https://zhyChesterCheung.github.io/photos/xiancheng.jpg)

1. 创建-新建new：新创建了一个线程对象

2. 就绪态-可运行runnable：线程对象创建后，其他线程调用了该对象的start()方法，该状态的线程位于可运行的线程池中，等待被线程调度选中，获得cpu的使用权

3. 运行态-运行running：可运行状态的线程获得了cpu的时间片，执行程序代码

4. 阻塞态-阻塞block：线程因为某种原因放弃了cpu的使用权，也即让出了time slice，暂时停止运行，直到线程进入runnable的状态才有机会再次获得cpu的time slice转到运行状态，其中阻塞分为3种情况：
(1) 等待阻塞：运行的线程执行wait()方法，jvm会将该线程放入等待队列
(2)同步阻塞：运行的线程在获得对象的同步锁时，若该同步锁被别的线程占用，则jvm会把该线程放入线程池lock pool中
(3)其他阻塞：运行的线程执行Thread.sleep()或者join方法，或者发出I/O请求，jvm会把他设为阻塞状态

5. 死亡：线程run，main方法执行结束，或者因异常退出了run方法，则该线程结束生命周期，死亡的线程不可复生。

### 12. 同步方法和同步代码块的区别是什么？

Java允许多线程并发控制，当多个线程同时操作一个可共享的资源变量时(如数据的增删查改)，将会导致数据的不准确，相互之间发生冲突，因此加入锁的作用就是，避免在线程没有完成操作之前，被其他线程调用，从而保证了该变量的唯一性和准确性。

同步方法，就是有synchronized关键字修饰的方法，由于Java对象都默认用this或当前class作为锁(内置锁)，内置锁会保护整个方法，；

同步代码块可以选择以什么来加锁，比同步方法要更细颗粒度，我们可以选择只同步会发生同步问题的部分代码，而不是整个代码。同步方法使用关键字synchronized修饰方法，而同步代码块主要是修饰需要进行同步的代码，用synchronized(object) {代码内容} 进行修饰；(同步是一种高消耗的操作，因此应该尽量减少同步的内容)

### 13. 在监视器Monitor内部，是如何实现线程同步的？程序应该实现哪种级别的同步？

在Java虚拟机中，每个对象都通过某种逻辑关联监视器，每个监视器和一个对象引用相关联；为了实现监视器的互斥功能，每个对象都关联着一把锁。监视器和锁在Java中时一起使用的，监视器监视一块同步代码，确保一次只有一个线程执行同步代码块。

线程在获取锁之前不允许执行同步代码。

### 14. 什么是死锁deadlock？

死锁是多个进程间因资源竞争而导致的一种僵局(互相等待)，若无外力作用，这些进程都无法向前推进。死锁产生的4个条件：

+ 互斥条件：一个资源一次只能被一个进程使用？如何有效避免死锁？

+ 不剥夺条件：进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走，只能由获得该资源的进程自己主动来释放。

+ 请求与保持条件：一个进程因为请求其他资源而被阻塞时，对于已获得的资源保持不放。

+ 循环等待条件：若干进程之间形成一种头尾相接的循环等待资源的关系。

只要破坏了其中一个条件就可以破坏死锁，其中最简单的方法就是：破坏循环等待条件，指定获取锁的顺序，避免相互等待，并强制线程按照指定的顺序获取锁，让所有的线程都以同样的顺序加锁和释放锁，就不会出现死锁了。

### 15. Java集合类框架的基本接口有哪些？

•    Collection：代表一组对象，每一个对象都是它的子元素。
•    Set：不包含重复元素的Collection。
•    List：有顺序的collection，并且可以包含重复元素。
•    Map：可以把键(key)映射到值(value)的对象，键不能重复。

总共有两大接口：Collection和Map，一个是元素集合，一个是键值对的集合；

其中List和Set实现了Collection接口，一个是有序元素集合，一个是无序元素集合；而ArrayList和LinkedList实现了List接口，HashSet实现了Set接口；

HashMap，TreeMap和HashTable实现了Map接口，并且HashTable是线程安全的，但是HashMap性能更好。

![线程2](https://zhyChesterCheung.github.io/photos/Array.jpg)

### 什么是迭代器(Iterator)？

Iterator接口提供了很多对集合元素进行迭代的方法。每一个集合类都包含了可以返回迭代器实例的迭代方法。迭代器可以在迭代的过程中删除底层集合的元素。

### Iterator和ListIterator的区别是什么？

下面列出了他们的区别：
•    Iterator可用来遍历Set和List集合，但是ListIterator只能用来遍历List。
•    Iterator对集合只能是前向遍历，ListIterator既可以前向也可以后向。
•    ListIterator实现了Iterator接口，并包含其他的功能，比如：增加元素，替换元素，获取前一个和后一个元素的索引，等等。

### Java中的HashMap的工作原理是什么？

Java中的HashMap是以键值对(key-value)的形式存储元素的。HashMap需要一个hash函数，它使用hashCode()和equals()方法来向集合/从集合添加和检索元素。当调用put()方法的时候，HashMap会计算key的hash值，然后把键值对存储在集合中合适的索引上。如果key已经存在了，value会被更新成新值。HashMap的一些重要的特性是它的容量(capacity)，负载因子(load factor)和扩容极限(threshold resizing)。

### HashMap和Hashtable有什么区别？

 HashMap和Hashtable都实现了Map接口，因此很多特性非常相似。但是，他们有以下不同点：
•    HashMap允许键和值是null，而Hashtable不允许键或者值是null。
•    Hashtable是同步的，而HashMap不是。因此，HashMap更适合于单线程环境，而Hashtable适合于多线程环境。
•    HashMap提供了可供应用迭代的键的集合，因此，HashMap是快速失败的。另一方面，Hashtable提供了对键的列举(Enumeration)。

**一般认为Hashtable是一个遗留的类。**

### 数组(Array)和列表(ArrayList)有什么区别？什么时候应该使用Array而不是ArrayList？

下面列出了Array和ArrayList的不同点：
•    Array可以包含基本类型和对象类型，ArrayList只能包含对象类型。
•    Array大小是固定的，ArrayList的大小是动态变化的（动态数组）。
•    ArrayList提供了更多的方法和特性，比如：addAll()，removeAll()，iterator()等等。
•    对于基本类型数据，集合使用自动装箱来减少编码工作量。但是，当处理固定大小的基本数据类型的时候，这种方式相对比较慢。

### ArrayList和LinkedList有什么区别？
ArrayList和LinkedList都实现了List接口，他们有以下的不同点：
•    ArrayList是基于索引的数据接口，**它的底层是数组**。它可以以O(1)时间复杂度对元素进行随机访问。与此对应，LinkedList是以元素链表的形式存储它的数据，每一个元素都和它的前一个和后一个元素链接在一起，在这种情况下，查找某个元素的时间复杂度是O(n)。
•    相对于ArrayList，LinkedList的插入，添加，删除操作速度更快，因为当元素被添加到集合任意位置的时候，不需要像数组那样重新计算大小或者是更新索引。
•    LinkedList比ArrayList更占内存，因为LinkedList为每一个节点存储了两个指针，一个指向前一个元素，一个指向下一个元素。

### 如何权衡是使用无序的数组还是有序的数组？

有序数组最大的好处在于查找的时间复杂度是O(log n)，而无序数组是O(n)。有序数组的缺点是插入操作的时间复杂度是O(n)，因为值大的元素需要往后移动来给新元素腾位置。相反，无序数组的插入时间复杂度是常量O(1)。

### HashSet和TreeSet有什么区别？

HashSet是由一个hash表来实现的，因此，它的元素是无序的。add()，remove()，contains()方法的时间复杂度是O(1)。
另一方面，**TreeSet是由一个树形的结构来实现的，它里面的元素是有序的。**因此，add()，remove()，contains()方法的时间复杂度是O(logn)。

```php
List的子类特点
        ArrayList:
            底层数据结构是数组，查询快，增删慢
            线程不安全，效率高
        Vector:
            底层数据结构是数组，查询快，增删慢
            线程安全，效率低
        LinkedList:
            底层数据结构是链表，查询慢，增删快
            线程不安全，效率高
```

### sleep() 和 wait() 有什么区别?
sleep是线程类（Thread）的方法，导致此线程暂停执行指定时间，给执行机会给其他线程，但是监控状态依然保持，到时后会自动恢复。调用sleep不会释放对象锁。

wait是Object类的方法，对此对象调用wait方法导致本线程放弃对象锁，进入等待此对象的等待锁定池，只有针对此对象发出notify方法（或not ifyAll）后本线程才进入对象锁定池准备获得对象锁进入运行状态。

### error和exception有什么区别?
error表示恢复不是不可能但很困难的情况下的一种严重问题。比如说内存溢出。不可能指望程序能处理这样的情况。

exception表示一种设计或实现问题。也就是说，它表示如果程序运行正常，从不会发生的情况。

### GC是什么? 为什么要有GC?
GC是垃圾收集的意思（Gabage Collection）,内存处理是编程人员容易出现问题的地方，忘记或者错误的内存回收会导致程序或系统的不稳定甚至崩溃，Java提供的GC功能可以自动监测对象是否超过作用域从而达到自动回收内存的目的。当程序员创建对象时，GC就开始监控这个对象的地址、大小以及使用情况。Java语言没有提供释放已分配内存的显示操作方法,因此程序员不能实时的调用垃圾回收器对某个对象或所有对象进行垃圾回收。

### java中有几种类型的流？JDK为每种类型的流提供了一些抽象类以供继承，请说出他们分别是哪些类？

字节流，字符流。字节流继承于InputStream \ OutputStream，字符流继承于InputStreamReader \ OutputStreamWriter。在java.io包中还有许多其他的流，主要是为了提高性能和使用方便。

