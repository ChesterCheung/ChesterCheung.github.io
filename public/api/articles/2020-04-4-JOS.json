{"title":"6.828 ZhyOS在macOS下的环境配置-2020","uid":"f7e8743372d74f41e88e20899613bd15","slug":"2020-04-4-JOS","date":"2020-04-04T10:00:00.000Z","updated":"2021-09-20T11:38:35.010Z","comments":true,"path":"api/articles/2020-04-4-JOS.json","keywords":null,"cover":null,"content":"<h2 id=\"6-828-ZhyOS在macOS下的环境配置-2020\"><a href=\"#6-828-ZhyOS在macOS下的环境配置-2020\" class=\"headerlink\" title=\"6.828 ZhyOS在macOS下的环境配置-2020\"></a>6.828 ZhyOS在macOS下的环境配置-2020</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>本文主要介绍如何在macOS下配置mit 6.828 JOS的实验环境</p></blockquote>\n<p>​    实习期做过一些业务之后，最直观的感受是做业务相对来说比较繁琐，每天疲于完成分配的需求，对个人成长来说不是特别大。和翔少一波交流后，还是想回归学校，利用余下不多的时间多打打基础，考虑抓抓基础以后往infrastructure方向发展。</p>\n<p>​    在进行JOS之前，在网上搜索关于JOS的开发环境，基本都是关于在ubuntu下的配置教程，很多博客和文章都提到<em>“不是32位linux就不好配置，会浪费大量时间在配置环境”</em>上之类的言论。奈何为囊中羞涩所困，在连续开了几个centOS后，本人OS X没有过多的存储资源可以使用，加上实在无法忍受开VMware恐怖的耗电量和发热量，尝试将开发环境移到<code>macOS</code>下。</p>\n<p>​    起初按照刘学长博客进行配置，但是出现一堆读不懂的error；简单碰壁后发现其实无比简单，在这里放上我的配置教程，过程非常简单可操作，希望能帮助到更多的coder完成这个项目。</p>\n<h3 id=\"1-Tools-we-need\"><a href=\"#1-Tools-we-need\" class=\"headerlink\" title=\"1. Tools we need\"></a>1. Tools we need</h3><p>配置环境之前，有两个工具是必须要进行配置的：</p>\n<ul>\n<li><p>Homebrew</p>\n</li>\n<li><p>Macports</p>\n<p>建议大家直接Google，按照官网公开的方法进行配置即可～(需要在管理员模式下进行，否则会遇到很多Permission Denied的报错，通常难以解决，本菜🐔也被困扰很久)</p>\n</li>\n</ul>\n<h3 id=\"2-运行JOS-demo\"><a href=\"#2-运行JOS-demo\" class=\"headerlink\" title=\"2. 运行JOS demo\"></a>2. 运行JOS demo</h3><ul>\n<li><p>QEMU</p>\n<p>在Homebrew工具下，直接利用brew即可安装i386-jos-elf-gcc和i386-jos-elf-gdb</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">brew tap liudangyi&#x2F;i386-jos-elf-gcc &#x2F;&#x2F;添加第三方库\nbrew install i386-jos-elf-gcc i386-jos-elf-gdb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li><p>官网克隆源码</p>\n<p>从mit课程官网得到6.828的git地址，发现从2018年后就未更新，所以我们用2018的代码实现</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">mkdir ~&#x2F;6.828\ncd 6.828\ngit clone https:&#x2F;&#x2F;pdos.csail.mit.edu&#x2F;6.828&#x2F;2018&#x2F;jos.git lab<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li>make jos的boot loader和kernel</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cd .&#x2F;lab\nmake<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li>成功后及显示</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">+ as kern&#x2F;entry.S\n+ cc kern&#x2F;entrypgdir.c\n+ cc kern&#x2F;init.c\n+ cc kern&#x2F;console.c\n+ cc kern&#x2F;monitor.c\n+ cc kern&#x2F;printf.c\n+ cc kern&#x2F;kdebug.c\n+ cc lib&#x2F;printfmt.c\n+ cc lib&#x2F;readline.c\n+ cc lib&#x2F;string.c\n+ ld obj&#x2F;kern&#x2F;kernel\ni386-jos-elf-ld: warning: section &#96;.bss&#39; type changed to PROGBITS\n+ as boot&#x2F;boot.S\n+ cc -Os boot&#x2F;main.c\n+ ld boot&#x2F;boot\nboot block is 382 bytes (max 510)\n+ mk obj&#x2F;kern&#x2F;kernel.img<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li>启动JOS qemu</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make qemu<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>此时即可成功启动JOS，enjoy～</p>\n<h3 id=\"3-持续关注\"><a href=\"#3-持续关注\" class=\"headerlink\" title=\"3. 持续关注\"></a>3. 持续关注</h3><p>​    正值疫情老虎徘徊，再加上工作需求和学业压力，今天先完成了相关环境的配置，后续会继续进行OS的开发和学习，计划在一个月内完成这6个Lab，自己学习的过程中也帮助大家踩踩坑，祝大家都能早日拿到心仪的offer～</p>\n","text":"6.828 ZhyOS在macOS下的环境配置-2020 本文主要介绍如何在macOS下配置mit 6.828 JOS的实验环境 ​ 实习期做过一些业务之后，最直观的感受是做业务相对来说比较繁琐，每天疲于完成分配的需求，对个人成长来说不是特别大。和翔少一波交流后，还是想回归学校，...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"OS","slug":"OS","count":5,"path":"api/categories/OS.json"}],"tags":[{"name":"OS","slug":"OS","count":7,"path":"api/tags/OS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-828-ZhyOS%E5%9C%A8macOS%E4%B8%8B%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-2020\"><span class=\"toc-text\">6.828 ZhyOS在macOS下的环境配置-2020</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-Tools-we-need\"><span class=\"toc-text\">1. Tools we need</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E8%BF%90%E8%A1%8CJOS-demo\"><span class=\"toc-text\">2. 运行JOS demo</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%8C%81%E7%BB%AD%E5%85%B3%E6%B3%A8\"><span class=\"toc-text\">3. 持续关注</span></a></li></ol></li></ol>","author":{"name":"Csuzhang","slug":"blog-author","avatar":"http://csuzhang.info/about/self.png","link":"https://github.com/zhyChesterCheung","description":"A passionate & singlehood backend developer","socials":{"github":"https://github.com/zhyChesterCheung","twitter":"https://twitter.com/ChesterCheung4","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/5689093900","zhihu":"https://www.zhihu.com/people/la-la-la-la-la-la-la-ji-9","csdn":"https://blog.csdn.net/weixin_44390145","juejin":"https://juejin.cn/user/1803630845901783","customs":{}}},"mapped":true,"prev_post":{"title":"手握日月摘星辰，更藉浊酒祭风尘","uid":"6f5ea625869961c502c50cec5703ac96","slug":"2019-12-1-2019Summary","date":"2019-12-01T12:00:00.000Z","updated":"2021-10-07T10:00:56.968Z","comments":true,"path":"api/articles/2019-12-1-2019Summary.json","keywords":null,"cover":"http://csuzhang.info/photos/friend4.jpg","text":"——2019不负盛世年华，2020拼命奋发有为今天是2019年12月1日，距离这一年的结束只剩下了最后一个月的韶光，回首2019年的所遇所为、所闻所感，有着颇深的感悟，也正巧受到山西天美集团张永芬姐姐的邀请，和来长沙团建的哥哥姐姐们一起吃了晚饭，刚刚结束了狼人杀局，睡不着觉之间突...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"thinking","slug":"thinking","count":4,"path":"api/categories/thinking.json"}],"tags":[{"name":"thinking","slug":"thinking","count":4,"path":"api/tags/thinking.json"}],"author":{"name":"Csuzhang","slug":"blog-author","avatar":"http://csuzhang.info/about/self.png","link":"https://github.com/zhyChesterCheung","description":"A passionate & singlehood backend developer","socials":{"github":"https://github.com/zhyChesterCheung","twitter":"https://twitter.com/ChesterCheung4","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/5689093900","zhihu":"https://www.zhihu.com/people/la-la-la-la-la-la-la-ji-9","csdn":"https://blog.csdn.net/weixin_44390145","juejin":"https://juejin.cn/user/1803630845901783","customs":{}}},"feature":true},"next_post":{"title":"python实现常用测试模块","uid":"d24ba787beb7c57b8dde0e5cc960693e","slug":"2020-2-25-pytest","date":"2020-02-25T15:00:00.000Z","updated":"2021-10-07T09:23:24.819Z","comments":true,"path":"api/articles/2020-2-25-pytest.json","keywords":null,"cover":"http://csuzhang.info/photos/pytest-3.png","text":"用python实现常用测试模块python AES 加解密模块 Definition： AES：高级加密标准(Advanced Encryption Standard)是最常见的对称加密算法之一，微信小程序就是用合格加密算法。 对称加密算法也就是加密和解密使用相同的密钥，具体的流...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[{"name":"Test","slug":"Test","count":3,"path":"api/categories/Test.json"}],"tags":[{"name":"OS","slug":"OS","count":7,"path":"api/tags/OS.json"},{"name":"Test","slug":"Test","count":3,"path":"api/tags/Test.json"}],"author":{"name":"Csuzhang","slug":"blog-author","avatar":"http://csuzhang.info/about/self.png","link":"https://github.com/zhyChesterCheung","description":"A passionate & singlehood backend developer","socials":{"github":"https://github.com/zhyChesterCheung","twitter":"https://twitter.com/ChesterCheung4","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/5689093900","zhihu":"https://www.zhihu.com/people/la-la-la-la-la-la-la-ji-9","csdn":"https://blog.csdn.net/weixin_44390145","juejin":"https://juejin.cn/user/1803630845901783","customs":{}}}}}