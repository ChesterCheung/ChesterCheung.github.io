{"title":"6.828 ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020","uid":"f7e8743372d74f41e88e20899613bd15","slug":"2020-04-4-JOS","date":"2020-04-04T10:00:00.000Z","updated":"2021-09-20T11:38:35.010Z","comments":true,"path":"api/articles/2020-04-4-JOS.json","keywords":null,"cover":null,"content":"<h2 id=\"6-828-ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020\"><a href=\"#6-828-ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020\" class=\"headerlink\" title=\"6.828 ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020\"></a>6.828 ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•åœ¨macOSä¸‹é…ç½®mit 6.828 JOSçš„å®éªŒç¯å¢ƒ</p></blockquote>\n<p>â€‹    å®ä¹ æœŸåšè¿‡ä¸€äº›ä¸šåŠ¡ä¹‹åï¼Œæœ€ç›´è§‚çš„æ„Ÿå—æ˜¯åšä¸šåŠ¡ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç¹çï¼Œæ¯å¤©ç–²äºå®Œæˆåˆ†é…çš„éœ€æ±‚ï¼Œå¯¹ä¸ªäººæˆé•¿æ¥è¯´ä¸æ˜¯ç‰¹åˆ«å¤§ã€‚å’Œç¿”å°‘ä¸€æ³¢äº¤æµåï¼Œè¿˜æ˜¯æƒ³å›å½’å­¦æ ¡ï¼Œåˆ©ç”¨ä½™ä¸‹ä¸å¤šçš„æ—¶é—´å¤šæ‰“æ‰“åŸºç¡€ï¼Œè€ƒè™‘æŠ“æŠ“åŸºç¡€ä»¥åå¾€infrastructureæ–¹å‘å‘å±•ã€‚</p>\n<p>â€‹    åœ¨è¿›è¡ŒJOSä¹‹å‰ï¼Œåœ¨ç½‘ä¸Šæœç´¢å…³äºJOSçš„å¼€å‘ç¯å¢ƒï¼ŒåŸºæœ¬éƒ½æ˜¯å…³äºåœ¨ubuntuä¸‹çš„é…ç½®æ•™ç¨‹ï¼Œå¾ˆå¤šåšå®¢å’Œæ–‡ç« éƒ½æåˆ°<em>â€œä¸æ˜¯32ä½linuxå°±ä¸å¥½é…ç½®ï¼Œä¼šæµªè´¹å¤§é‡æ—¶é—´åœ¨é…ç½®ç¯å¢ƒâ€</em>ä¸Šä¹‹ç±»çš„è¨€è®ºã€‚å¥ˆä½•ä¸ºå›Šä¸­ç¾æ¶©æ‰€å›°ï¼Œåœ¨è¿ç»­å¼€äº†å‡ ä¸ªcentOSåï¼Œæœ¬äººOS Xæ²¡æœ‰è¿‡å¤šçš„å­˜å‚¨èµ„æºå¯ä»¥ä½¿ç”¨ï¼ŒåŠ ä¸Šå®åœ¨æ— æ³•å¿å—å¼€VMwareææ€–çš„è€—ç”µé‡å’Œå‘çƒ­é‡ï¼Œå°è¯•å°†å¼€å‘ç¯å¢ƒç§»åˆ°<code>macOS</code>ä¸‹ã€‚</p>\n<p>â€‹    èµ·åˆæŒ‰ç…§åˆ˜å­¦é•¿åšå®¢è¿›è¡Œé…ç½®ï¼Œä½†æ˜¯å‡ºç°ä¸€å †è¯»ä¸æ‡‚çš„errorï¼›ç®€å•ç¢°å£åå‘ç°å…¶å®æ— æ¯”ç®€å•ï¼Œåœ¨è¿™é‡Œæ”¾ä¸Šæˆ‘çš„é…ç½®æ•™ç¨‹ï¼Œè¿‡ç¨‹éå¸¸ç®€å•å¯æ“ä½œï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æ›´å¤šçš„coderå®Œæˆè¿™ä¸ªé¡¹ç›®ã€‚</p>\n<h3 id=\"1-Tools-we-need\"><a href=\"#1-Tools-we-need\" class=\"headerlink\" title=\"1. Tools we need\"></a>1. Tools we need</h3><p>é…ç½®ç¯å¢ƒä¹‹å‰ï¼Œæœ‰ä¸¤ä¸ªå·¥å…·æ˜¯å¿…é¡»è¦è¿›è¡Œé…ç½®çš„ï¼š</p>\n<ul>\n<li><p>Homebrew</p>\n</li>\n<li><p>Macports</p>\n<p>å»ºè®®å¤§å®¶ç›´æ¥Googleï¼ŒæŒ‰ç…§å®˜ç½‘å…¬å¼€çš„æ–¹æ³•è¿›è¡Œé…ç½®å³å¯ï½(éœ€è¦åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹è¿›è¡Œï¼Œå¦åˆ™ä¼šé‡åˆ°å¾ˆå¤šPermission Deniedçš„æŠ¥é”™ï¼Œé€šå¸¸éš¾ä»¥è§£å†³ï¼Œæœ¬èœğŸ”ä¹Ÿè¢«å›°æ‰°å¾ˆä¹…)</p>\n</li>\n</ul>\n<h3 id=\"2-è¿è¡ŒJOS-demo\"><a href=\"#2-è¿è¡ŒJOS-demo\" class=\"headerlink\" title=\"2. è¿è¡ŒJOS demo\"></a>2. è¿è¡ŒJOS demo</h3><ul>\n<li><p>QEMU</p>\n<p>åœ¨Homebrewå·¥å…·ä¸‹ï¼Œç›´æ¥åˆ©ç”¨brewå³å¯å®‰è£…i386-jos-elf-gccå’Œi386-jos-elf-gdb</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">brew tap liudangyi&#x2F;i386-jos-elf-gcc &#x2F;&#x2F;æ·»åŠ ç¬¬ä¸‰æ–¹åº“\nbrew install i386-jos-elf-gcc i386-jos-elf-gdb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li><p>å®˜ç½‘å…‹éš†æºç </p>\n<p>ä»mitè¯¾ç¨‹å®˜ç½‘å¾—åˆ°6.828çš„gitåœ°å€ï¼Œå‘ç°ä»2018å¹´åå°±æœªæ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨2018çš„ä»£ç å®ç°</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">mkdir ~&#x2F;6.828\ncd 6.828\ngit clone https:&#x2F;&#x2F;pdos.csail.mit.edu&#x2F;6.828&#x2F;2018&#x2F;jos.git lab<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li>make josçš„boot loaderå’Œkernel</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cd .&#x2F;lab\nmake<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li>æˆåŠŸååŠæ˜¾ç¤º</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">+ as kern&#x2F;entry.S\n+ cc kern&#x2F;entrypgdir.c\n+ cc kern&#x2F;init.c\n+ cc kern&#x2F;console.c\n+ cc kern&#x2F;monitor.c\n+ cc kern&#x2F;printf.c\n+ cc kern&#x2F;kdebug.c\n+ cc lib&#x2F;printfmt.c\n+ cc lib&#x2F;readline.c\n+ cc lib&#x2F;string.c\n+ ld obj&#x2F;kern&#x2F;kernel\ni386-jos-elf-ld: warning: section &#96;.bss&#39; type changed to PROGBITS\n+ as boot&#x2F;boot.S\n+ cc -Os boot&#x2F;main.c\n+ ld boot&#x2F;boot\nboot block is 382 bytes (max 510)\n+ mk obj&#x2F;kern&#x2F;kernel.img<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<ul>\n<li>å¯åŠ¨JOS qemu</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make qemu<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>æ­¤æ—¶å³å¯æˆåŠŸå¯åŠ¨JOSï¼Œenjoyï½</p>\n<h3 id=\"3-æŒç»­å…³æ³¨\"><a href=\"#3-æŒç»­å…³æ³¨\" class=\"headerlink\" title=\"3. æŒç»­å…³æ³¨\"></a>3. æŒç»­å…³æ³¨</h3><p>â€‹    æ­£å€¼ç–«æƒ…è€è™å¾˜å¾Šï¼Œå†åŠ ä¸Šå·¥ä½œéœ€æ±‚å’Œå­¦ä¸šå‹åŠ›ï¼Œä»Šå¤©å…ˆå®Œæˆäº†ç›¸å…³ç¯å¢ƒçš„é…ç½®ï¼Œåç»­ä¼šç»§ç»­è¿›è¡ŒOSçš„å¼€å‘å’Œå­¦ä¹ ï¼Œè®¡åˆ’åœ¨ä¸€ä¸ªæœˆå†…å®Œæˆè¿™6ä¸ªLabï¼Œè‡ªå·±å­¦ä¹ çš„è¿‡ç¨‹ä¸­ä¹Ÿå¸®åŠ©å¤§å®¶è¸©è¸©å‘ï¼Œç¥å¤§å®¶éƒ½èƒ½æ—©æ—¥æ‹¿åˆ°å¿ƒä»ªçš„offerï½</p>\n","feature":true,"text":"6.828 ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020 æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•åœ¨macOSä¸‹é…ç½®mit 6.828 JOSçš„å®éªŒç¯å¢ƒ â€‹ å®ä¹ æœŸåšè¿‡ä¸€äº›ä¸šåŠ¡ä¹‹åï¼Œæœ€ç›´è§‚çš„æ„Ÿå—æ˜¯åšä¸šåŠ¡ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç¹çï¼Œæ¯å¤©ç–²äºå®Œæˆåˆ†é…çš„éœ€æ±‚ï¼Œå¯¹ä¸ªäººæˆé•¿æ¥è¯´ä¸æ˜¯ç‰¹åˆ«å¤§ã€‚å’Œç¿”å°‘ä¸€æ³¢äº¤æµåï¼Œè¿˜æ˜¯æƒ³å›å½’å­¦æ ¡ï¼Œ...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"OS","slug":"OS","count":2,"path":"api/categories/OS.json"}],"tags":[{"name":"OS","slug":"OS","count":6,"path":"api/tags/OS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-828-ZhyOS%E5%9C%A8macOS%E4%B8%8B%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-2020\"><span class=\"toc-text\">6.828 ZhyOSåœ¨macOSä¸‹çš„ç¯å¢ƒé…ç½®-2020</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-Tools-we-need\"><span class=\"toc-text\">1. Tools we need</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E8%BF%90%E8%A1%8CJOS-demo\"><span class=\"toc-text\">2. è¿è¡ŒJOS demo</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%8C%81%E7%BB%AD%E5%85%B3%E6%B3%A8\"><span class=\"toc-text\">3. æŒç»­å…³æ³¨</span></a></li></ol></li></ol>","author":{"name":"Csuzhang","slug":"blog-author","avatar":"http://csuzhang.info/about/self.png","link":"https://github.com/zhyChesterCheung","description":"A passionate & singlehood backend developer","socials":{"github":"https://github.com/zhyChesterCheung","twitter":"https://twitter.com/ChesterCheung4","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/5689093900","zhihu":"https://www.zhihu.com/people/la-la-la-la-la-la-la-ji-9","csdn":"https://blog.csdn.net/weixin_44390145","juejin":"https://juejin.cn/user/1803630845901783","customs":{}}},"mapped":true,"prev_post":{"title":"TOGAFä¼ä¸šæ¶æ„ä½“ç³»","uid":"8483753522c9d846e8ac4a720d8703bb","slug":"2020-5-10-TOGAF","date":"2020-05-10T11:00:00.000Z","updated":"2021-09-20T11:36:51.946Z","comments":true,"path":"api/articles/2020-5-10-TOGAF.json","keywords":null,"cover":[],"text":"TOGAFå®šä¹‰TOGAF å³ The Open Group Architecture Framework ï¼ˆå¼€æ”¾ç»„ä½“ç³»ç»“æ„æ¡†æ¶ï¼‰ï¼Œæ˜¯ç”±è‡´åŠ›äºæŠ€æœ¯æ ‡å‡†åˆ¶å®šå’Œæ¨å¹¿çš„éç›ˆåˆ©ç»„ç»‡ The Open Group åˆ¶å®šçš„ç”¨äºå¼€å‘ä¼ä¸šæ¶æ„ï¼ˆEnterprise Architectureï¼‰çš„ä¸€å¥—...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"thinking","slug":"thinking","count":2,"path":"api/categories/thinking.json"}],"tags":[{"name":"thinking","slug":"thinking","count":2,"path":"api/tags/thinking.json"}],"author":{"name":"Csuzhang","slug":"blog-author","avatar":"http://csuzhang.info/about/self.png","link":"https://github.com/zhyChesterCheung","description":"A passionate & singlehood backend developer","socials":{"github":"https://github.com/zhyChesterCheung","twitter":"https://twitter.com/ChesterCheung4","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/5689093900","zhihu":"https://www.zhihu.com/people/la-la-la-la-la-la-la-ji-9","csdn":"https://blog.csdn.net/weixin_44390145","juejin":"https://juejin.cn/user/1803630845901783","customs":{}}},"feature":true},"next_post":{"title":"Gtestå•å…ƒæµ‹è¯•æ¡†æ¶","uid":"f12f50cba820b0109abbca457b92e39c","slug":"2020-3-2-gtest","date":"2020-03-02T12:00:00.000Z","updated":"2021-09-20T11:39:21.010Z","comments":true,"path":"api/articles/2020-3-2-gtest.json","keywords":null,"cover":null,"text":"å¼•è¨€æ–‡ç« ä¸­å°†å…ˆä»‹ç»å•å…ƒæµ‹è¯•çš„ç›¸å…³æ¦‚å¿µï¼Œç„¶åå¼•å…¥Googleçš„å¼€æºC++å•å…ƒæµ‹è¯•æ¡†æ¶Gtestï¼Œå¯¹C++çš„å„ç§å•å…ƒæµ‹è¯•åœºæ™¯æä¾›å®Œå¤‡çš„æ”¯æŒï¼Œæœ€åé€šè¿‡ç¼–è¯‘ã€è¿è¡ŒGtestè‡ªå¸¦çš„ä¸€ä¸ªæµ‹è¯•æ ·ä¾‹ï¼Œä»‹ç»å¦‚ä½•åœ¨Unix/Linuxä¸‹ä½¿ç”¨Gtestã€‚ å•å…ƒæµ‹è¯•è¯´åˆ°å•å…ƒæµ‹è¯•ï¼Œå¤§å®¶åº”è¯¥ä¸ä¼šé™Œç”Ÿã€‚ä½œä¸ºè½¯...","link":"","photos":[],"count_time":{"symbolsCount":905,"symbolsTime":"1 mins."},"categories":[{"name":"Test","slug":"Test","count":4,"path":"api/categories/Test.json"}],"tags":[{"name":"OS","slug":"OS","count":6,"path":"api/tags/OS.json"},{"name":"Test","slug":"Test","count":5,"path":"api/tags/Test.json"}],"author":{"name":"Csuzhang","slug":"blog-author","avatar":"http://csuzhang.info/about/self.png","link":"https://github.com/zhyChesterCheung","description":"A passionate & singlehood backend developer","socials":{"github":"https://github.com/zhyChesterCheung","twitter":"https://twitter.com/ChesterCheung4","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/5689093900","zhihu":"https://www.zhihu.com/people/la-la-la-la-la-la-la-ji-9","csdn":"https://blog.csdn.net/weixin_44390145","juejin":"https://juejin.cn/user/1803630845901783","customs":{}}}}}